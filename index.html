<!DOCTYPE html>
<html>
<head>
  <title>Tokenizacja RWA</title>
  <script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>
</head>
<body>
  <h2>Tokenizacja aktywów (RWA)</h2>
  <p>Adres właściciela: <input type="text" id="address" size="42" /></p>
  <p>Token URI (np. opis lub link): <input type="text" id="uri" size="42" /></p>
  <button onclick="mint()">Tokenizuj</button>
  <p id="info"></p>

  <script>
    const contractAddress = "0xd9145CCE52D386f254917e481eB44e9943F39138";
    const abi = [
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "to",
        "type": "address"
      },
      {
        "internalType": "string",
        "name": "tokenURI",
        "type": "string"
      }
    ],
    "name": "mint",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  }
];

    const web3 = new Web3(window.ethereum);
    const contract = new web3.eth.Contract(abi, contractAddress);

    async function mint() {
      const address = document.getElementById("address").value;
      const uri = document.getElementById("uri").value;
      const accounts = await ethereum.request({ method: 'eth_requestAccounts' });

      contract.methods.mint(address, uri).send({ from: accounts[0] })
        .then(tx => document.getElementById("info").innerText = "Token stworzony! TX: " + tx.transactionHash)
        .catch(err => document.getElementById("info").innerText = "Błąd: " + err.message);
    }
  </script>
</body>
</html>
